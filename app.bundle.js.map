{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/constants.js","webpack:///./src/components/canvas/index.js","webpack:///./src/components/palette/index.js","webpack:///./src/components/toolbox/index.js","webpack:///./src/components/PixelState.js","webpack:///./src/index.js","webpack:///./src/components/App.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","TOOLS","PEN","ERASER","BUCKET","REPLACE","KEY_BINDS","B","E","P","R","Canvas","constructor","pixelCount","getColor","getActiveTool","getPixelCount","this","pixels","Array","map","fill","pixelSize","addPixel","setPaint","erasePixel","paintBucket","eventHandler","floodFill","getPixelSize","replaceColor","setPixels","paint","HANDLERS_MAP","[object Object]","subscribe","publisher","addSubscriber","clearCanvas","document","querySelector","width","e","type","X","Math","floor","pageX","target","offsetLeft","Y","pageY","offsetTop","updateState","drawPixels","context","getElementById","getContext","j","fillStyle","fillRect","canvas","canvasWidth","canvasHeight","height","clearRect","initialColor","paintColor","length","addCanvas","createElement","id","addEventListener","style","border","appendChild","Palette","onColorChange","color","addPalette","palette","primaryColor","body","Toolbox","setActiveTool","setPixelCount","activeTool","toUpperCase","which","addToolbox","sizeInput","label","setAttribute","innerHTML","min","max","toolbox","pen","eraser","bucket","innerText","PixelState","subscribers","pixelState","subscriber","push","updatedState","localStorage","setItem","JSON","stringify","processLoad","getItem","parse","processUnload","removeItem","htmlContents","documentElement","start","window"],"mappings":"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","file":"app.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","/* eslint-disable import/prefer-default-export */\nexport const TOOLS = {\n  PEN: 'pen',\n  ERASER: 'eraser',\n  BUCKET: 'bucket',\n  REPLACE: 'replace',\n};\n\nexport const KEY_BINDS = {\n  B: 98,\n  E: 101,\n  P: 112,\n  R: 114,\n};\n","/* eslint-disable no-plusplus */\n/* eslint-disable class-methods-use-this */\nimport { TOOLS } from '../../constants';\n\nexport default class Canvas {\n  constructor(pixelCount, getColor, getActiveTool, getPixelCount) {\n    this.pixels = [...Array(pixelCount)].map(() => Array(pixelCount).fill('transparent'));\n    this.getColor = getColor;\n    this.getPixelCount = getPixelCount;\n    this.pixelCount = pixelCount;\n    this.getActiveTool = getActiveTool;\n    this.pixelSize = 0;\n    this.addPixel = this.addPixel.bind(this);\n    this.setPaint = this.setPaint.bind(this);\n    this.erasePixel = this.erasePixel.bind(this);\n    this.paintBucket = this.paintBucket.bind(this);\n    this.eventHandler = this.eventHandler.bind(this);\n    this.floodFill = this.floodFill.bind(this);\n    this.getPixelSize = this.getPixelSize.bind(this);\n    this.replaceColor = this.replaceColor.bind(this);\n    this.setPixels = this.setPixels.bind(this);\n    this.paint = false;\n    this.HANDLERS_MAP = {\n      [TOOLS.PEN]: this.addPixel,\n      [TOOLS.ERASER]: this.erasePixel,\n      [TOOLS.BUCKET]: this.paintBucket,\n      [TOOLS.REPLACE]: this.replaceColor,\n    };\n  }\n\n  subscribe(publisher) {\n    publisher.addSubscriber(this);\n    this.publisher = publisher;\n  }\n\n  // notify(pixelState) {\n  //   this.draw(pixelState);\n  // }\n\n  setPixels(pixels) {\n    this.pixels = pixels;\n  }\n\n  setPaint() {\n    if (this.paint) {\n      this.paint = false;\n    } else {\n      this.paint = true;\n    }\n  }\n\n  getPixelSize() {\n    if (this.pixelCount !== this.getPixelCount()) {\n      this.pixels = [...Array(this.getPixelCount())].map(() => Array(this.getPixelCount()).fill('transparent'));\n      this.clearCanvas();\n      this.pixelCount = this.getPixelCount();\n    }\n    const canvas = document.querySelector('canvas');\n    return +canvas.width / this.getPixelCount();\n  }\n\n  addPixel(e) {\n    if (this.paint === false && e.type === 'mousemove') return;\n    const X = Math.floor((e.pageX - e.target.offsetLeft) / this.getPixelSize());\n    const Y = Math.floor((e.pageY - e.target.offsetTop) / this.getPixelSize());\n    this.pixels[X][Y] = this.getColor();\n    this.publisher.updateState(this.pixels);\n    this.clearCanvas();\n    this.drawPixels();\n  }\n\n  drawPixels() {\n    const context = document.getElementById('canvas').getContext('2d');\n    for (let i = 0; i < this.pixelCount; i++) {\n      for (let j = 0; j < this.pixelCount; j++) {\n        context.fillStyle = this.pixels[i][j];\n        const X = i * this.getPixelSize();\n        const Y = j * this.getPixelSize();\n        context.fillRect(X, Y, this.getPixelSize(), this.getPixelSize());\n      }\n    }\n  }\n\n  clearCanvas() {\n    const canvas = document.getElementById('canvas');\n    const context = canvas.getContext('2d');\n    const canvasWidth = canvas.width;\n    const canvasHeight = canvas.height;\n    context.clearRect(0, 0, canvasWidth, canvasHeight);\n  }\n\n  erasePixel(e) {\n    if (this.paint === false && e.type === 'mousemove') return;\n    const X = Math.floor((e.pageX - e.target.offsetLeft) / this.getPixelSize());\n    const Y = Math.floor((e.pageY - e.target.offsetTop) / this.getPixelSize());\n    this.pixels[X][Y] = 'transparent';\n    this.publisher.updateState(this.pixels);\n    this.clearCanvas();\n    this.drawPixels();\n  }\n\n  paintBucket(e) {\n    if (this.paint === false && e.type === 'mousemove') return;\n    const X = Math.floor((e.pageX - e.target.offsetLeft) / this.getPixelSize());\n    const Y = Math.floor((e.pageY - e.target.offsetTop) / this.getPixelSize());\n    if (this.pixels[X][Y] === this.getColor()) return;\n    this.floodFill(X, Y, this.pixels[X][Y], this.getColor());\n    this.publisher.updateState(this.pixels);\n    this.clearCanvas();\n    this.drawPixels();\n  }\n\n  floodFill(X, Y, initialColor, paintColor) {\n    if (X > this.pixels.length - 1 || X < 0 || Y > this.pixels.length - 1 || Y < 0) return;\n    if (this.pixels[X][Y] !== initialColor) return;\n    this.pixels[X][Y] = paintColor;\n    this.floodFill(X - 1, Y, initialColor, paintColor);\n    this.floodFill(X + 1, Y, initialColor, paintColor);\n    this.floodFill(X, Y - 1, initialColor, paintColor);\n    this.floodFill(X, Y + 1, initialColor, paintColor);\n  }\n\n  replaceColor(e) {\n    if (this.paint === false && e.type === 'mousemove') return;\n    const X = Math.floor((e.pageX - e.target.offsetLeft) / this.getPixelSize());\n    const Y = Math.floor((e.pageY - e.target.offsetTop) / this.getPixelSize());\n    const initialColor = this.pixels[X][Y];\n    for (let i = 0; i < this.pixelCount; i++) {\n      for (let j = 0; j < this.pixelCount; j++) {\n        if (this.pixels[i][j] === initialColor) {\n          this.pixels[i][j] = this.getColor();\n        }\n      }\n    }\n    this.publisher.updateState(this.pixels);\n    this.clearCanvas();\n    this.drawPixels();\n  }\n\n  eventHandler(e) {\n    return this.HANDLERS_MAP[this.getActiveTool()](e);\n  }\n\n  addCanvas() {\n    const canvas = document.createElement('canvas');\n    canvas.id = 'canvas';\n    canvas.addEventListener('click', this.eventHandler);\n    canvas.addEventListener('mousedown', this.setPaint);\n    canvas.addEventListener('mouseup', this.setPaint);\n    canvas.addEventListener('mousemove', this.eventHandler);\n    canvas.addEventListener('mouseleave', () => { this.paint = false; });\n    canvas.width = '500';\n    canvas.height = '500';\n    canvas.style.border = '1px solid black';\n    document.querySelector('body').appendChild(canvas);\n  }\n}\n","/* eslint-disable class-methods-use-this */\nexport default class Palette {\n  constructor(onColorChange) {\n    this.onColorChange = (e) => {\n      const color = e.target.value;\n      onColorChange(color);\n    };\n  }\n\n  addPalette() {\n    const palette = document.createElement('div');\n    const primaryColor = document.createElement('input');\n    palette.id = 'palette';\n    primaryColor.type = 'color';\n    primaryColor.id = 'primary-color';\n    primaryColor.addEventListener('change', this.onColorChange);\n    const body = document.querySelector('body');\n    palette.appendChild(primaryColor);\n    body.appendChild(palette);\n  }\n}\n","/* eslint-disable consistent-return */\n/* eslint-disable func-names */\n/* eslint-disable class-methods-use-this */\nimport { TOOLS, KEY_BINDS } from '../../constants';\n\nexport default class Toolbox {\n  constructor(setActiveTool, setPixelCount) {\n    this.setActiveTool = function (e) {\n      let activeTool = null;\n      if (e.type === 'click') {\n        activeTool = TOOLS[`${e.target.id}`.toUpperCase()];\n      } else {\n        switch (e.which) {\n          case KEY_BINDS.P:\n            activeTool = TOOLS.BUCKET;\n            break;\n          case KEY_BINDS.E:\n            activeTool = TOOLS.ERASER;\n            break;\n          case KEY_BINDS.B:\n            activeTool = TOOLS.BUCKET;\n            break;\n          case KEY_BINDS.R:\n            activeTool = TOOLS.REPLACE;\n            break;\n          default:\n            return null;\n        }\n      }\n      setActiveTool(activeTool);\n    };\n    this.setPixelCount = function (e) {\n      const pixelCount = e.target.value;\n      setPixelCount(pixelCount);\n    };\n  }\n\n  addToolbox() {\n    const sizeInput = document.createElement('input');\n    const label = document.createElement('Label');\n    label.setAttribute('for', sizeInput);\n    label.innerHTML = 'Canvas side size: ';\n    sizeInput.id = 'size';\n    sizeInput.type = 'number';\n    sizeInput.min = 1;\n    sizeInput.max = 500;\n    sizeInput.value = 32;\n    const toolbox = document.createElement('div');\n    const pen = document.createElement('div');\n    const eraser = document.createElement('div');\n    const bucket = document.createElement('div');\n    const replaceColor = document.createElement('div');\n    toolbox.id = 'toolbox';\n    pen.id = 'pen';\n    eraser.id = 'eraser';\n    bucket.id = 'bucket';\n    replaceColor.id = 'replace';\n    pen.innerText = 'Pen';\n    eraser.innerText = 'Eraser';\n    bucket.innerText = 'Bucket';\n    replaceColor.innerText = 'Replace';\n    sizeInput.addEventListener('change', this.setPixelCount);\n    toolbox.addEventListener('click', this.setActiveTool);\n    toolbox.appendChild(pen);\n    toolbox.appendChild(eraser);\n    toolbox.appendChild(bucket);\n    toolbox.appendChild(replaceColor);\n    document.querySelector('body').addEventListener('keypress', this.setActiveTool);\n    document.querySelector('body').appendChild(label);\n    document.querySelector('body').appendChild(sizeInput);\n    document.querySelector('body').appendChild(toolbox);\n  }\n}\n","export default class PixelState {\n  constructor() {\n    this.subscribers = [];\n    this.pixelState = [];\n  }\n\n  addSubscriber(subscriber) {\n    this.subscribers.push(subscriber);\n  }\n\n  updateState(updatedState) {\n    this.pixelState = updatedState;\n    localStorage.setItem('pixelState', JSON.stringify(this.pixelState));\n    // this.subscribers.forEach(subscriber => subscriber.notify(this.pixelState));\n  }\n}\n","import App from './components/App';\n\nconst app = new App();\n\napp.start();\n\n// /* eslint-disable no-use-before-define */\n// let context = document.getElementById('canvas').getContext('2d');\n// const canvas = document.getElementById('canvas');\n// context = canvas.getContext('2d');\n// context.strokeStyle = '#ff0000';\n// context.lineJoin = 'round';\n// context.lineWidth = 16;\n\n// const clickX = [];\n// const clickY = [];\n// const clickDrag = [];\n// let paint;\n\n// /**\n//  * Add information where the user clicked at.\n//  * @param {number} x\n//  * @param {number} y\n//  * @return {boolean} dragging\n//  */\n// function addClick(x, y, dragging) {\n//   clickX.push(x);\n//   clickY.push(y);\n//   clickDrag.push(dragging);\n// }\n\n// /**\n//  * Redraw the complete canvas.\n//  */\n// // eslint-disable-next-line no-unused-vars\n// // function redraw() {\n// //   // Clears the canvas\n// //   context.clearRect(0, 0, context.canvas.width, context.canvas.height);\n\n// //   for (let i = 0; i < clickX.length; i += 1) {\n// //     if (!clickDrag[i] && i === 0) {\n// //       context.beginPath();\n// //       context.moveTo(clickX[i], clickY[i]);\n// //       context.stroke();\n// //     } else if (!clickDrag[i] && i > 0) {\n// //       context.closePath();\n\n// //       context.beginPath();\n// //       context.moveTo(clickX[i], clickY[i]);\n// //       context.stroke();\n// //     } else {\n// //       context.lineTo(clickX[i], clickY[i]);\n// //       context.stroke();\n// //     }\n// //   }\n// // }\n\n// /**\n//  * Draw the newly added point.\n//  * @return {void}\n//  */\n// function drawNew() {\n//   const i = clickX.length - 1;\n//   if (!clickDrag[i]) {\n//     if (clickX.length === 0) {\n//       context.beginPath();\n//       context.moveTo(clickX[i], clickY[i]);\n//       context.stroke();\n//     } else {\n//       context.closePath();\n\n//       context.beginPath();\n//       context.moveTo(clickX[i], clickY[i]);\n//       context.stroke();\n//     }\n//   } else {\n//     context.lineTo(clickX[i], clickY[i]);\n//     context.stroke();\n//   }\n// }\n\n// function mouseDownEventHandler(e) {\n//   paint = true;\n//   const x = e.pageX - canvas.offsetLeft;\n//   const y = e.pageY - canvas.offsetTop;\n//   if (paint) {\n//     addClick(x, y, false);\n//     drawNew();\n//   }\n// }\n\n\n// function mouseUpEventHandler() {\n//   context.closePath();\n//   paint = false;\n// }\n\n// function mouseMoveEventHandler(e) {\n//   const x = e.pageX - canvas.offsetLeft;\n//   const y = e.pageY - canvas.offsetTop;\n//   if (paint) {\n//     addClick(x, y, true);\n//     drawNew();\n//   }\n// }\n\n// function removeRaceHandlers() {\n//   canvas.removeEventListener('mousedown', mouseWins);\n// }\n\n// function setUpHandler(detectEvent) {\n//   removeRaceHandlers();\n//   canvas.addEventListener('mouseup', mouseUpEventHandler);\n//   canvas.addEventListener('mousemove', mouseMoveEventHandler);\n//   canvas.addEventListener('mousedown', mouseDownEventHandler);\n//   mouseDownEventHandler(detectEvent);\n// }\n\n// function mouseWins(e) {\n//   setUpHandler(true, e);\n// }\n\n// canvas.addEventListener('mousedown', mouseWins);\n","/* eslint-disable max-len */\n/* eslint-disable class-methods-use-this */\nimport Canvas from './canvas/index';\nimport Palette from './palette/index';\nimport Toolbox from './toolbox/index';\nimport PixelState from './PixelState';\n\nexport default class App {\n  constructor() {\n    this.color = '#000000';\n    this.pixelCount = 32;\n    this.getColor = this.getColor.bind(this);\n    this.onColorChange = this.onColorChange.bind(this);\n    this.getActiveTool = this.getActiveTool.bind(this);\n    this.setActiveTool = this.setActiveTool.bind(this);\n    this.getPixelCount = this.getPixelCount.bind(this);\n    this.setPixelCount = this.setPixelCount.bind(this);\n    this.processLoad = this.processLoad.bind(this);\n    this.activeTool = 'pen';\n    this.canvas = null;\n    this.palette = null;\n    this.toolbox = null;\n  }\n\n  onColorChange(color) {\n    this.color = color;\n  }\n\n  getColor() {\n    return this.color;\n  }\n\n  getActiveTool() {\n    return this.activeTool;\n  }\n\n  setActiveTool(activeTool) {\n    this.activeTool = activeTool;\n  }\n\n  getPixelCount() {\n    return this.pixelCount;\n  }\n\n  setPixelCount(pixelCount) {\n    this.pixelCount = +pixelCount;\n  }\n\n  processLoad() {\n    if (this.canvas && localStorage.getItem('pixelState')) {\n      this.canvas.setPixels(JSON.parse(localStorage.getItem('pixelState')));\n      this.canvas.drawPixels();\n    }\n  }\n\n  processUnload() {\n    if (localStorage.getItem('innerHtml')) {\n      localStorage.removeItem('innerHtml');\n      localStorage.removeItem('activeTool');\n    } else {\n      const htmlContents = document.documentElement.innerHTML;\n      localStorage.setItem('innerHtml', htmlContents);\n      localStorage.setItem('activeTool', this.activeTool);\n    }\n  }\n\n  start() {\n    this.palette = new Palette(this.onColorChange);\n    this.palette.addPalette();\n    this.toolbox = new Toolbox(this.setActiveTool, this.setPixelCount);\n    this.toolbox.addToolbox();\n    this.canvas = new Canvas(this.pixelCount, this.getColor, this.getActiveTool, this.getPixelCount);\n    this.canvas.addCanvas();\n    const pixelState = new PixelState();\n    this.canvas.subscribe(pixelState);\n    window.addEventListener('load', this.processLoad);\n    window.addEventListener('unload', this.processUnload);\n  }\n}\n"],"sourceRoot":""}