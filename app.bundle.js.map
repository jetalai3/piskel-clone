{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/constants.js","webpack:///./src/components/canvas/index.js","webpack:///./src/components/palette/index.js","webpack:///./src/components/toolbox/index.js","webpack:///./src/components/PixelState.js","webpack:///./src/index.js","webpack:///./src/components/App.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","TOOLS","PEN","ERASER","BUCKET","REPLACE","LIGHTEN","RECTANGLE","KEY_BINDS","B","E","P","R","L","M","Canvas","constructor","pixelCount","getColor","getActiveTool","getPixelCount","this","pixels","Array","map","fill","pixelSize","addPixel","setPaint","erasePixel","paintBucket","eventHandler","floodFill","getPixelSize","replaceColor","setPixels","showCoords","lighten","rectangle","paint","X1","Y1","HANDLERS_MAP","[object Object]","subscribe","publisher","addSubscriber","clearCanvas","document","querySelector","width","e","type","X","Math","floor","pageX","target","offsetLeft","Y","pageY","offsetTop","updateState","drawPixels","context","getElementById","getContext","j","fillStyle","fillRect","canvas","canvasWidth","canvasHeight","height","clearRect","initialColor","paintColor","length","innerText","H","g","b","cmin","min","cmax","max","delta","h","round","abs","toFixed","x","toString","X2","Y2","handler","addCanvas","createElement","id","addEventListener","style","border","appendChild","coords","Palette","onColorChange","color","addPalette","palette","primaryColor","body","Toolbox","setActiveTool","setPixelCount","activeTool","toUpperCase","which","addToolbox","sizeInput","label","setAttribute","innerHTML","toolbox","pen","eraser","bucket","PixelState","subscribers","pixelState","subscriber","push","updatedState","localStorage","setItem","JSON","stringify","processLoad","getItem","parse","processUnload","removeItem","htmlContents","documentElement","start","window"],"mappings":"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","file":"app.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","/* eslint-disable import/prefer-default-export */\nexport const TOOLS = {\n  PEN: 'pen',\n  ERASER: 'eraser',\n  BUCKET: 'bucket',\n  REPLACE: 'replace',\n  LIGHTEN: 'lighten',\n  RECTANGLE: 'rectangle',\n};\n\nexport const KEY_BINDS = {\n  B: 98,\n  E: 101,\n  P: 112,\n  R: 114,\n  L: 108,\n  M: 109,\n};\n","/* eslint-disable no-plusplus */\n/* eslint-disable class-methods-use-this */\n/* eslint-disable no-mixed-operators */\nimport { TOOLS } from '../../constants';\n\nexport default class Canvas {\n  constructor(pixelCount, getColor, getActiveTool, getPixelCount) {\n    this.pixels = [...Array(pixelCount)].map(() => Array(pixelCount).fill('transparent'));\n    this.getColor = getColor;\n    this.getPixelCount = getPixelCount;\n    this.pixelCount = pixelCount;\n    this.getActiveTool = getActiveTool;\n    this.pixelSize = 0;\n    this.addPixel = this.addPixel.bind(this);\n    this.setPaint = this.setPaint.bind(this);\n    this.erasePixel = this.erasePixel.bind(this);\n    this.paintBucket = this.paintBucket.bind(this);\n    this.eventHandler = this.eventHandler.bind(this);\n    this.floodFill = this.floodFill.bind(this);\n    this.getPixelSize = this.getPixelSize.bind(this);\n    this.replaceColor = this.replaceColor.bind(this);\n    this.setPixels = this.setPixels.bind(this);\n    this.showCoords = this.showCoords.bind(this);\n    this.lighten = this.lighten.bind(this);\n    this.rectangle = this.rectangle.bind(this);\n    this.paint = false;\n    this.X1 = 0;\n    this.Y1 = 0;\n    this.HANDLERS_MAP = {\n      [TOOLS.PEN]: this.addPixel,\n      [TOOLS.ERASER]: this.erasePixel,\n      [TOOLS.BUCKET]: this.paintBucket,\n      [TOOLS.REPLACE]: this.replaceColor,\n      [TOOLS.LIGHTEN]: this.lighten,\n      [TOOLS.RECTANGLE]: this.rectangle,\n    };\n  }\n\n  subscribe(publisher) {\n    publisher.addSubscriber(this);\n    this.publisher = publisher;\n  }\n\n  // notify(pixelState) {\n  //   this.draw(pixelState);\n  // }\n\n  setPixels(pixels) {\n    this.pixels = pixels;\n  }\n\n  setPaint() {\n    if (this.paint) {\n      this.paint = false;\n    } else {\n      this.paint = true;\n    }\n  }\n\n  getPixelSize() {\n    if (this.pixelCount !== this.getPixelCount()) {\n      this.pixels = [...Array(this.getPixelCount())].map(() => Array(this.getPixelCount()).fill('transparent'));\n      this.clearCanvas();\n      this.pixelCount = this.getPixelCount();\n    }\n    const canvas = document.querySelector('canvas');\n    return +canvas.width / this.getPixelCount();\n  }\n\n  addPixel(e) {\n    if (this.paint === false && e.type === 'mousemove') return;\n    const X = Math.floor((e.pageX - e.target.offsetLeft) / this.getPixelSize());\n    const Y = Math.floor((e.pageY - e.target.offsetTop) / this.getPixelSize());\n    this.pixels[X][Y] = this.getColor();\n    this.publisher.updateState(this.pixels);\n    this.clearCanvas();\n    this.drawPixels();\n  }\n\n  drawPixels() {\n    const context = document.getElementById('canvas').getContext('2d');\n    for (let i = 0; i < this.pixelCount; i++) {\n      for (let j = 0; j < this.pixelCount; j++) {\n        context.fillStyle = this.pixels[i][j];\n        const X = i * this.getPixelSize();\n        const Y = j * this.getPixelSize();\n        context.fillRect(X, Y, this.getPixelSize(), this.getPixelSize());\n      }\n    }\n  }\n\n  clearCanvas() {\n    const canvas = document.getElementById('canvas');\n    const context = canvas.getContext('2d');\n    const canvasWidth = canvas.width;\n    const canvasHeight = canvas.height;\n    context.clearRect(0, 0, canvasWidth, canvasHeight);\n  }\n\n  erasePixel(e) {\n    if (this.paint === false && e.type === 'mousemove') return;\n    const X = Math.floor((e.pageX - e.target.offsetLeft) / this.getPixelSize());\n    const Y = Math.floor((e.pageY - e.target.offsetTop) / this.getPixelSize());\n    this.pixels[X][Y] = 'transparent';\n    this.publisher.updateState(this.pixels);\n    this.clearCanvas();\n    this.drawPixels();\n  }\n\n  paintBucket(e) {\n    if (this.paint === false && e.type === 'mousemove') return;\n    const X = Math.floor((e.pageX - e.target.offsetLeft) / this.getPixelSize());\n    const Y = Math.floor((e.pageY - e.target.offsetTop) / this.getPixelSize());\n    if (this.pixels[X][Y] === this.getColor()) return;\n    this.floodFill(X, Y, this.pixels[X][Y], this.getColor());\n    this.publisher.updateState(this.pixels);\n    this.clearCanvas();\n    this.drawPixels();\n  }\n\n  floodFill(X, Y, initialColor, paintColor) {\n    if (X > this.pixels.length - 1 || X < 0 || Y > this.pixels.length - 1 || Y < 0) return;\n    if (this.pixels[X][Y] !== initialColor) return;\n    this.pixels[X][Y] = paintColor;\n    this.floodFill(X - 1, Y, initialColor, paintColor);\n    this.floodFill(X + 1, Y, initialColor, paintColor);\n    this.floodFill(X, Y - 1, initialColor, paintColor);\n    this.floodFill(X, Y + 1, initialColor, paintColor);\n  }\n\n  replaceColor(e) {\n    if (this.paint === false && e.type === 'mousemove') return;\n    const X = Math.floor((e.pageX - e.target.offsetLeft) / this.getPixelSize());\n    const Y = Math.floor((e.pageY - e.target.offsetTop) / this.getPixelSize());\n    const initialColor = this.pixels[X][Y];\n    for (let i = 0; i < this.pixelCount; i++) {\n      for (let j = 0; j < this.pixelCount; j++) {\n        if (this.pixels[i][j] === initialColor) {\n          this.pixels[i][j] = this.getColor();\n        }\n      }\n    }\n    this.publisher.updateState(this.pixels);\n    this.clearCanvas();\n    this.drawPixels();\n  }\n\n  showCoords(e) {\n    const X = Math.floor((e.pageX - e.target.offsetLeft) / this.getPixelSize());\n    const Y = Math.floor((e.pageY - e.target.offsetTop) / this.getPixelSize());\n    const coords = document.getElementById('coords');\n    coords.innerText = `${X + 1}:${Y + 1}`;\n  }\n\n  lighten(e) {\n    if (this.paint === false && e.type === 'mousemove') return;\n    const X = Math.floor((e.pageX - e.target.offsetLeft) / this.getPixelSize());\n    const Y = Math.floor((e.pageY - e.target.offsetTop) / this.getPixelSize());\n    const H = this.pixels[X][Y];\n    let r = 0;\n    let g = 0;\n    let b = 0;\n    if (H.length === 4) {\n      r = `0x${H[1]}${H[1]}`;\n      g = `0x${H[2]}${H[2]}`;\n      b = `0x${H[3]}${H[3]}`;\n    } else if (H.length === 7) {\n      r = `0x${H[1]}${H[2]}`;\n      g = `0x${H[3]}${H[4]}`;\n      b = `0x${H[5]}${H[6]}`;\n    }\n    r /= 255;\n    g /= 255;\n    b /= 255;\n    const cmin = Math.min(r, g, b);\n    const cmax = Math.max(r, g, b);\n    const delta = cmax - cmin;\n    let h = 0;\n    let s = 0;\n    let l = 0;\n    if (delta === 0) h = 0;\n    else if (cmax === r) h = ((g - b) / delta) % 6;\n    else if (cmax === g) h = (b - r) / delta + 2;\n    else h = (r - g) / delta + 4;\n    h = Math.round(h * 60);\n    if (h < 0) h += 360;\n    l = (cmax + cmin) / 2;\n    s = delta === 0 ? 0 : delta / (1 - Math.abs(2 * l - 1));\n    s = +(s * 100).toFixed(1);\n    l = +(l * 100).toFixed(1);\n    if (l <= 90) l += 10;\n    s /= 100;\n    l /= 100;\n    const c = (1 - Math.abs(2 * l - 1)) * s;\n    const x = c * (1 - Math.abs((h / 60) % 2 - 1));\n    const m = l - c / 2;\n    r = 0;\n    g = 0;\n    b = 0;\n    if (h >= 0 && h < 60) {\n      r = c;\n      g = x;\n      b = 0;\n    } else if (h >= 60 && h < 120) {\n      r = x;\n      g = c;\n      b = 0;\n    } else if (h >= 120 && h < 180) {\n      r = 0;\n      g = c;\n      b = x;\n    } else if (h >= 180 && h < 240) {\n      r = 0;\n      g = x;\n      b = c;\n    } else if (h >= 240 && h < 300) {\n      r = x;\n      g = 0;\n      b = c;\n    } else if (h >= 300 && h < 360) {\n      r = c;\n      g = 0;\n      b = x;\n    }\n    r = Math.round((r + m) * 255).toString(16);\n    g = Math.round((g + m) * 255).toString(16);\n    b = Math.round((b + m) * 255).toString(16);\n    if (r.length === 1) r = `0${r}`;\n    if (g.length === 1) g = `0${g}`;\n    if (b.length === 1) b = `0${b}`;\n    this.pixels[X][Y] = `#${r}${g}${b}`;\n    this.publisher.updateState(this.pixels);\n    this.clearCanvas();\n    this.drawPixels();\n  }\n\n  rectangle(e) {\n    if (e.type === 'mousedown') {\n      this.X1 = Math.floor((e.pageX - e.target.offsetLeft) / this.getPixelSize());\n      this.Y1 = Math.floor((e.pageY - e.target.offsetTop) / this.getPixelSize());\n    } else if (e.type === 'mouseup') {\n      const X2 = Math.floor((e.pageX - e.target.offsetLeft) / this.getPixelSize());\n      const Y2 = Math.floor((e.pageY - e.target.offsetTop) / this.getPixelSize());\n      for (let i = this.X1; i < X2; i++) {\n        for (let j = this.Y1; j < Y2; j++) {\n          this.pixels[i][j] = this.getColor();\n        }\n      }\n    }\n    this.publisher.updateState(this.pixels);\n    this.clearCanvas();\n    this.drawPixels();\n  }\n\n  eventHandler(e) {\n    const handlers = this.HANDLERS_MAP;\n    const activeTool = this.getActiveTool();\n    const handler = handlers[activeTool];\n    const result = handler(e);\n    return result;\n  }\n\n  addCanvas() {\n    const canvas = document.createElement('canvas');\n    canvas.id = 'canvas';\n    canvas.addEventListener('click', this.eventHandler);\n    canvas.addEventListener('mousedown', this.setPaint);\n    canvas.addEventListener('mouseup', this.setPaint);\n    canvas.addEventListener('mousedown', this.eventHandler);\n    canvas.addEventListener('mouseup', this.eventHandler);\n    canvas.addEventListener('mousemove', this.eventHandler);\n    canvas.addEventListener('mouseleave', () => { this.paint = false; });\n    canvas.addEventListener('mousemove', this.showCoords);\n    canvas.width = '500';\n    canvas.height = '500';\n    canvas.style.border = '1px solid black';\n    document.querySelector('body').appendChild(canvas);\n    const coords = document.createElement('label');\n    coords.id = 'coords';\n    canvas.addEventListener('mouseleave', () => { coords.innerText = ''; });\n    document.querySelector('body').appendChild(coords);\n  }\n}\n","/* eslint-disable class-methods-use-this */\nexport default class Palette {\n  constructor(onColorChange) {\n    this.onColorChange = (e) => {\n      const color = e.target.value;\n      onColorChange(color);\n    };\n  }\n\n  addPalette() {\n    const palette = document.createElement('div');\n    const primaryColor = document.createElement('input');\n    palette.id = 'palette';\n    primaryColor.type = 'color';\n    primaryColor.id = 'primary-color';\n    primaryColor.addEventListener('change', this.onColorChange);\n    const body = document.querySelector('body');\n    palette.appendChild(primaryColor);\n    body.appendChild(palette);\n  }\n}\n","/* eslint-disable consistent-return */\n/* eslint-disable func-names */\n/* eslint-disable class-methods-use-this */\nimport { TOOLS, KEY_BINDS } from '../../constants';\n\nexport default class Toolbox {\n  constructor(setActiveTool, setPixelCount) {\n    this.setActiveTool = function (e) {\n      let activeTool = null;\n      if (e.type === 'click') {\n        activeTool = TOOLS[`${e.target.id}`.toUpperCase()];\n      } else {\n        switch (e.which) {\n          case KEY_BINDS.P:\n            activeTool = TOOLS.PEN;\n            break;\n          case KEY_BINDS.E:\n            activeTool = TOOLS.ERASER;\n            break;\n          case KEY_BINDS.B:\n            activeTool = TOOLS.BUCKET;\n            break;\n          case KEY_BINDS.R:\n            activeTool = TOOLS.REPLACE;\n            break;\n          case KEY_BINDS.L:\n            activeTool = TOOLS.LIGHTEN;\n            break;\n          case KEY_BINDS.M:\n            activeTool = TOOLS.RECTANGLE;\n            break;\n          default:\n            return null;\n        }\n      }\n      setActiveTool(activeTool);\n    };\n    this.setPixelCount = function (e) {\n      const pixelCount = e.target.value;\n      setPixelCount(pixelCount);\n    };\n  }\n\n  addToolbox() {\n    const sizeInput = document.createElement('input');\n    const label = document.createElement('Label');\n    label.setAttribute('for', sizeInput);\n    label.innerHTML = 'Canvas side size: ';\n    sizeInput.id = 'size';\n    sizeInput.type = 'number';\n    sizeInput.min = 1;\n    sizeInput.max = 500;\n    sizeInput.value = 32;\n    const toolbox = document.createElement('div');\n    const pen = document.createElement('div');\n    const eraser = document.createElement('div');\n    const bucket = document.createElement('div');\n    const replaceColor = document.createElement('div');\n    const lighten = document.createElement('div');\n    const rectangle = document.createElement('div');\n    toolbox.id = 'toolbox';\n    pen.id = 'pen';\n    eraser.id = 'eraser';\n    bucket.id = 'bucket';\n    replaceColor.id = 'replace';\n    lighten.id = 'lighten';\n    rectangle.id = 'rectangle';\n    pen.innerText = 'Pen';\n    eraser.innerText = 'Eraser';\n    bucket.innerText = 'Bucket';\n    replaceColor.innerText = 'Replace';\n    lighten.innerText = 'Lighten';\n    rectangle.innerText = 'Rectangle';\n    sizeInput.addEventListener('change', this.setPixelCount);\n    toolbox.addEventListener('click', this.setActiveTool);\n    toolbox.appendChild(pen);\n    toolbox.appendChild(eraser);\n    toolbox.appendChild(bucket);\n    toolbox.appendChild(replaceColor);\n    toolbox.appendChild(lighten);\n    toolbox.appendChild(rectangle);\n    document.querySelector('body').addEventListener('keypress', this.setActiveTool);\n    document.querySelector('body').appendChild(label);\n    document.querySelector('body').appendChild(sizeInput);\n    document.querySelector('body').appendChild(toolbox);\n  }\n}\n","export default class PixelState {\n  constructor() {\n    this.subscribers = [];\n    this.pixelState = [];\n  }\n\n  addSubscriber(subscriber) {\n    this.subscribers.push(subscriber);\n  }\n\n  updateState(updatedState) {\n    this.pixelState = updatedState;\n    localStorage.setItem('pixelState', JSON.stringify(this.pixelState));\n    // this.subscribers.forEach(subscriber => subscriber.notify(this.pixelState));\n  }\n}\n","import App from './components/App';\n\nconst app = new App();\n\napp.start();\n\n// /* eslint-disable no-use-before-define */\n// let context = document.getElementById('canvas').getContext('2d');\n// const canvas = document.getElementById('canvas');\n// context = canvas.getContext('2d');\n// context.strokeStyle = '#ff0000';\n// context.lineJoin = 'round';\n// context.lineWidth = 16;\n\n// const clickX = [];\n// const clickY = [];\n// const clickDrag = [];\n// let paint;\n\n// /**\n//  * Add information where the user clicked at.\n//  * @param {number} x\n//  * @param {number} y\n//  * @return {boolean} dragging\n//  */\n// function addClick(x, y, dragging) {\n//   clickX.push(x);\n//   clickY.push(y);\n//   clickDrag.push(dragging);\n// }\n\n// /**\n//  * Redraw the complete canvas.\n//  */\n// // eslint-disable-next-line no-unused-vars\n// // function redraw() {\n// //   // Clears the canvas\n// //   context.clearRect(0, 0, context.canvas.width, context.canvas.height);\n\n// //   for (let i = 0; i < clickX.length; i += 1) {\n// //     if (!clickDrag[i] && i === 0) {\n// //       context.beginPath();\n// //       context.moveTo(clickX[i], clickY[i]);\n// //       context.stroke();\n// //     } else if (!clickDrag[i] && i > 0) {\n// //       context.closePath();\n\n// //       context.beginPath();\n// //       context.moveTo(clickX[i], clickY[i]);\n// //       context.stroke();\n// //     } else {\n// //       context.lineTo(clickX[i], clickY[i]);\n// //       context.stroke();\n// //     }\n// //   }\n// // }\n\n// /**\n//  * Draw the newly added point.\n//  * @return {void}\n//  */\n// function drawNew() {\n//   const i = clickX.length - 1;\n//   if (!clickDrag[i]) {\n//     if (clickX.length === 0) {\n//       context.beginPath();\n//       context.moveTo(clickX[i], clickY[i]);\n//       context.stroke();\n//     } else {\n//       context.closePath();\n\n//       context.beginPath();\n//       context.moveTo(clickX[i], clickY[i]);\n//       context.stroke();\n//     }\n//   } else {\n//     context.lineTo(clickX[i], clickY[i]);\n//     context.stroke();\n//   }\n// }\n\n// function mouseDownEventHandler(e) {\n//   paint = true;\n//   const x = e.pageX - canvas.offsetLeft;\n//   const y = e.pageY - canvas.offsetTop;\n//   if (paint) {\n//     addClick(x, y, false);\n//     drawNew();\n//   }\n// }\n\n\n// function mouseUpEventHandler() {\n//   context.closePath();\n//   paint = false;\n// }\n\n// function mouseMoveEventHandler(e) {\n//   const x = e.pageX - canvas.offsetLeft;\n//   const y = e.pageY - canvas.offsetTop;\n//   if (paint) {\n//     addClick(x, y, true);\n//     drawNew();\n//   }\n// }\n\n// function removeRaceHandlers() {\n//   canvas.removeEventListener('mousedown', mouseWins);\n// }\n\n// function setUpHandler(detectEvent) {\n//   removeRaceHandlers();\n//   canvas.addEventListener('mouseup', mouseUpEventHandler);\n//   canvas.addEventListener('mousemove', mouseMoveEventHandler);\n//   canvas.addEventListener('mousedown', mouseDownEventHandler);\n//   mouseDownEventHandler(detectEvent);\n// }\n\n// function mouseWins(e) {\n//   setUpHandler(true, e);\n// }\n\n// canvas.addEventListener('mousedown', mouseWins);\n","/* eslint-disable max-len */\n/* eslint-disable class-methods-use-this */\nimport Canvas from './canvas/index';\nimport Palette from './palette/index';\nimport Toolbox from './toolbox/index';\nimport PixelState from './PixelState';\n\nexport default class App {\n  constructor() {\n    this.color = '#000000';\n    this.pixelCount = 32;\n    this.getColor = this.getColor.bind(this);\n    this.onColorChange = this.onColorChange.bind(this);\n    this.getActiveTool = this.getActiveTool.bind(this);\n    this.setActiveTool = this.setActiveTool.bind(this);\n    this.getPixelCount = this.getPixelCount.bind(this);\n    this.setPixelCount = this.setPixelCount.bind(this);\n    this.processLoad = this.processLoad.bind(this);\n    this.activeTool = 'pen';\n    this.canvas = null;\n    this.palette = null;\n    this.toolbox = null;\n  }\n\n  onColorChange(color) {\n    this.color = color;\n  }\n\n  getColor() {\n    return this.color;\n  }\n\n  getActiveTool() {\n    return this.activeTool;\n  }\n\n  setActiveTool(activeTool) {\n    this.activeTool = activeTool;\n  }\n\n  getPixelCount() {\n    return this.pixelCount;\n  }\n\n  setPixelCount(pixelCount) {\n    this.pixelCount = +pixelCount;\n  }\n\n  processLoad() {\n    if (this.canvas && localStorage.getItem('pixelState')) {\n      this.canvas.setPixels(JSON.parse(localStorage.getItem('pixelState')));\n      this.canvas.drawPixels();\n    }\n  }\n\n  processUnload() {\n    if (localStorage.getItem('innerHtml')) {\n      localStorage.removeItem('innerHtml');\n      localStorage.removeItem('activeTool');\n    } else {\n      const htmlContents = document.documentElement.innerHTML;\n      localStorage.setItem('innerHtml', htmlContents);\n      localStorage.setItem('activeTool', this.activeTool);\n    }\n  }\n\n  start() {\n    this.palette = new Palette(this.onColorChange);\n    this.palette.addPalette();\n    this.toolbox = new Toolbox(this.setActiveTool, this.setPixelCount);\n    this.toolbox.addToolbox();\n    this.canvas = new Canvas(this.pixelCount, this.getColor, this.getActiveTool, this.getPixelCount);\n    this.canvas.addCanvas();\n    const pixelState = new PixelState();\n    this.canvas.subscribe(pixelState);\n    window.addEventListener('load', this.processLoad);\n    window.addEventListener('unload', this.processUnload);\n  }\n}\n"],"sourceRoot":""}